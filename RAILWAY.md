# Деплой на Railway

## Проблема: данные не сохраняются (включая фото аватара)

По умолчанию Railway использует **эфемерную файловую систему** — при каждом перезапуске или редеплое все файлы (включая `data.json`) удаляются.

## Решение: добавить Volume

Volume — постоянное хранилище, которое сохраняет данные между деплоями.

### Шаги

1. **Откройте проект в Railway** и выберите ваш сервис (relationship-app).

2. **Добавьте Volume:**
   - Нажмите **+ New** → **Volume**
   - Или через Command Palette (`⌘K` / `Ctrl+K`) → «Add Volume»

3. **Подключите Volume к сервису:**
   - Выберите ваш сервис (Next.js приложение)
   - **Mount Path:** укажите `/data`
   - Сохраните

4. **Передеплойте** приложение (Redeploy в Railway).

После этого Railway автоматически установит переменную `RAILWAY_VOLUME_MOUNT_PATH=/data`, и приложение будет сохранять `data.json` (включая фото аватара в base64) в постоянное хранилище.

### Ограничения Volume (по тарифу)

- **Free/Trial:** 0.5 GB, 1 volume
- **Hobby:** 5 GB, 10 volumes
- **Pro:** 50 GB, 20 volumes

### Совет по фото

Фото хранятся в base64 внутри `data.json`. Для экономии места используйте изображения до 1–2 MB. При необходимости можно сжимать фото перед загрузкой.
